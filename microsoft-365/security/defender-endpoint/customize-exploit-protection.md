---
title: Personnaliser la protection contre les codes malveillants exploitant une faille de sécurité
keywords: Exploit Protection, atténuations, activer, powershell, dep, cfg, emet, aslr
description: Vous pouvez activer ou désactiver des atténuations spécifiques utilisées par Exploit Protection à l’aide de l’Sécurité Windows ou de PowerShell. Vous pouvez également auditer les atténuations et exporter des configurations.
search.product: eADQiWindows 10XVcnh
ms.prod: m365-security
ms.mktglfcycl: manage
ms.sitesec: library
localization_priority: Normal
audience: ITPro
ms.topic: conceptual
author: dansimp
ms.author: dansimp
ms.reviewer: ''
manager: dansimp
ms.technology: mde
ms.openlocfilehash: f387731c491800cf5bd717322986b4301a7729ba
ms.sourcegitcommit: 6c342a956b2dbc32be33bac1a23a5038490f1b40
ms.translationtype: MT
ms.contentlocale: fr-FR
ms.lasthandoff: 08/26/2021
ms.locfileid: "58533482"
---
# <a name="customize-exploit-protection"></a>Personnaliser la protection contre les codes malveillants exploitant une faille de sécurité

[!INCLUDE [Microsoft 365 Defender rebranding](../../includes/microsoft-defender.md)]


**S’applique à :**
- [Microsoft Defender pour point de terminaison](https://go.microsoft.com/fwlink/p/?linkid=2154037)
- [Microsoft 365 Defender](https://go.microsoft.com/fwlink/?linkid=2118804)

> Vous souhaitez faire l’expérience de Defender pour point de terminaison ? [Inscrivez-vous pour bénéficier d’un essai gratuit.](https://signup.microsoft.com/create-account/signup?products=7f379fee-c4f9-4278-b0a1-e4c8c2fcdf7e&ru=https://aka.ms/MDEp2OpenTrial?ocid=docs-wdatp-assignaccess-abovefoldlink)

Exploit Protection applique automatiquement un certain nombre de techniques d’atténuation des attaques sur les processus du système d’exploitation et sur les applications individuelles.

Configurez ces paramètres à l’aide Sécurité Windows’application sur un appareil individuel. Ensuite, exportez la configuration en tant que fichier XML afin de pouvoir le déployer sur d’autres appareils. Utilisez la stratégie de groupe pour distribuer le fichier XML à plusieurs appareils à la fois. Vous pouvez également configurer les atténuations avec PowerShell.

Cet article répertorie chacune des atténuations disponibles dans Exploit Protection. Il indique si l’atténuation peut être appliquée à l’échelle du système ou à des applications individuelles et fournit une brève description du fonctionnement de l’atténuation.

Il explique également comment activer ou configurer les atténuations à l’aide de fournisseurs de services de configuration Sécurité Windows, PowerShell et de gestion des périphériques mobiles (CSP). Il s’agit de la première étape de la création d’une configuration que vous pouvez déployer sur votre réseau. L’étape suivante implique [la génération, l’exportation, l’importation](import-export-exploit-protection-emet-xml.md)et le déploiement de la configuration sur plusieurs appareils.

> [!WARNING]
> Certaines technologies d’atténuation en matière de sécurité peuvent présenter des problèmes de compatibilité avec certaines applications. Vous devez tester la protection contre le code malveillant exploitant une faille de sécurité dans tous les scénarios d’utilisation cibles en utilisant le [mode audit](evaluate-exploit-protection.md) avant de déployer la configuration dans un environnement de production ou sur le reste de votre réseau.

## <a name="exploit-protection-mitigations"></a>Atténuations Exploit Protection

Toutes les atténuations peuvent être configurées pour des applications individuelles. Certaines atténuations peuvent également être appliquées au niveau du système d’exploitation.

Vous pouvez définir chacune des atténuations sur, sur ou sur leur valeur par défaut. Certaines atténuations offrent des options supplémentaires qui sont indiquées dans la description du tableau.

Les valeurs par défaut sont toujours spécifiées entre crochets dans l’option **Utiliser par** défaut pour chaque atténuation. Dans l’exemple suivant, la valeur par défaut pour la prévention de l’exécution des données est « On ».

La configuration **par défaut Utiliser** pour chacun des paramètres d’atténuation indique notre recommandation pour un niveau de protection de base pour l’utilisation quotidienne pour les utilisateurs à domicile. Enterprise déploiements doivent prendre en compte la protection requise pour leurs besoins individuels et peuvent avoir besoin de modifier la configuration par rapport aux valeurs par défaut.

Pour les cmdlets PowerShell associées pour chaque atténuation, consultez le tableau de référence [PowerShell](#cmdlets-table) au bas de cet article.

|Atténuation|Description|Peut être appliqué à|Mode audit disponible|
|---|---|---|---|
|Protection du flux de contrôle (CFG)|Garantit l’intégrité du flux de contrôle pour les appels indirects. Peut éventuellement supprimer les exportations et utiliser la loi CFG stricte.|Niveau système et application|Non|
|Prévention de l’exécution des données (PED)|Empêche l’exécuter à partir de pages mémoire de données uniquement, telles que le tas et les piles. Configurable uniquement pour les applications 32 bits (x86), activées définitivement pour toutes les autres architectures. Peut éventuellement activer l’émulation de thunk ATL.|Niveau système et application|Non|
|Forcer la randomisation des images (randomisation du format d’espace d’adresse obligatoire)|Relocalisation forcée des images non compilées avec /DYNAMICBASE. Peut éventuellement échouer au chargement des images qui n’ont pas d’informations de déplacement.|Niveau système et application|Non|
|Randomiser les allocations de mémoire (randomisation du format d’espace d’adresse de bas en haut)|Aléatoire les emplacements pour les allocations de mémoire virtuelle. Il inclut les tas de structure système, les piles, les tebs et les pebs. Peut éventuellement utiliser une variation de randomisation plus large pour les processus 64 bits.|Niveau système et application|Non|
|Valider les chaînes d’exception (SEHOP)|Garantit l’intégrité d’une chaîne d’exceptions lors de la distribution des exceptions. Configurable uniquement pour les applications 32 bits (x86).|Niveau système et application|Non|
|Valider l’intégrité du segment de mémoire|Met fin à un processus lorsque l’altération du tas est détectée.|Niveau système et application|Non|
|Protection du code arbitraire (ACG)|Empêche l’introduction de code exécutable non-image-backed et empêche les pages de code d’être modifiées. Peut éventuellement autoriser le retrait du thread et autoriser la rétrogradation à distance (configurable uniquement avec PowerShell).|Niveau application uniquement|Oui|
|Bloquer les images de faible intégrité|Empêche le chargement d’images marquées avec une intégrité faible.|Niveau application uniquement|Oui|
|Bloquer les images distantes|Empêche le chargement d’images à partir d’appareils distants.|Niveau application uniquement|Non|
|Bloquer les polices non approuvées|Empêche le chargement des polices GDI non installées dans le répertoire des polices système, notamment les polices du web.|Niveau application uniquement|Oui|
|Protection de l’intégrité du code|Limite le chargement des images signées par Microsoft, WHQL ou une valeur supérieure. Peut éventuellement autoriser Microsoft Store images signées.|Niveau application uniquement|Oui|
|Désactiver les points d’extension|Désactive divers mécanismes d’extensibilité qui permettent l’injection de DLL dans tous les processus, tels que les DLL AppInit, les hooks de fenêtre et les fournisseurs de services Winsock.|Niveau application uniquement|Non|
|Désactiver les appels système Win32k|Empêche une application d’utiliser la table d’appel système Win32k.|Niveau application uniquement|Oui|
|Ne pas autoriser les processus enfants|Empêche une application de créer des processus enfants.|Niveau application uniquement|Oui|
|Exporter le filtrage d’adresses (EAF)|Détecte les opérations dangereuses résolues par du code malveillant. Peut éventuellement valider l’accès par des modules couramment utilisés par les exploits.|Niveau application uniquement|Oui|
|Importer le filtrage d’adresses (IAF)|Détecte les opérations dangereuses résolues par du code malveillant.|Niveau application uniquement|Oui|
|Simuler l’exécution (SimExec)|Garantit que les appels aux API sensibles retournent aux appelants légitimes. Configurable uniquement pour les applications 32 bits (x86). Non compatible avec ACG.|Niveau application uniquement|Oui|
|Valider l’invocation de l’API (CallerCheck)|Garantit que les API sensibles sont invoquées par des appelants légitimes. Configurable uniquement pour les applications 32 bits (x86). Non compatible avec ACG|Niveau application uniquement|Oui|
|Valider l’utilisation de la poignée|Provoque le renvoi d’une exception sur les références de handle non valides.|Niveau application uniquement|Non|
|Valider l’intégrité des dépendances d’image|Applique la signature du code pour Windows de dépendance d’image.|Niveau application uniquement|Non|
|Valider l’intégrité de la pile (StackPivot)|Garantit que la pile n’a pas été redirigée vers les API sensibles. Non compatible avec ACG.|Niveau application uniquement|Oui|

> [!IMPORTANT]
> Si vous ajoutez une application à la section **Paramètres** du programme et configurez des paramètres d’atténuation individuels à cet endroit, ils seront honorés au-dessus de la configuration pour les mêmes atténuations spécifiées dans la section **Paramètres système.** La matrice et les exemples suivants permettent d’illustrer le fonctionnement des valeurs par défaut :
>
>
> |Activé dans les **paramètres du programme**|Activé dans les **paramètres système**|Comportement|
> |---|---|---|
> |Oui|Non|Comme défini dans **les paramètres du programme**|
> |Oui|Oui|Comme défini dans **les paramètres du programme**|
> |Non|Oui|Comme défini dans **les paramètres système**|
> |Non|Oui|Valeur par défaut telle que définie dans **l’option Utiliser par** défaut|
>
>
> - **Exemple 1**
>
>    Il configure la prévention **de l’exécution des données (DEP)** dans la section **Paramètres système** pour qu’elle soit éteinte par **défaut.**
>
>    Il ajoute ensuite l’application *test.exe* la section **Paramètres du** programme. Dans les options de cette application, sous Prévention de l’exécution des données **,il** active l’option Remplacer les **paramètres** système et définit le commutateur **sur Activé.** Aucune autre application n’est répertoriée dans la section **Paramètres du** programme.
>
>    Le résultat sera que deP uniquement sera activé pour *test.exe*. La PD DEP n’est pas appliquée à toutes les autres applications.
>
>
> - **Exemple 2**
>
>    Joëlle configure la prévention **de l’exécution des données (DEP)** dans la section **Paramètres système** pour qu’elle soit éteinte par **défaut.**
>
>    Joëlle ajoute ensuite l’application *test.exe* la section **Paramètres du** programme. Dans les options de cette application, sous Prévention de l’exécution des données **,elle** active l’option Remplacer les **paramètres** système et définit le commutateur **sur Activé.**
>
>    Joëlle ajoute également l’application *miles.exe* la section **Paramètres** du programme et configure la protection du flux de contrôle **(CFG)** sur **On**. Elle n’active pas l’option Remplacer les **paramètres** système pour deP ou toute autre atténuation pour cette application.
>
>    Le résultat sera que deP sera activé pour *test.exe*. DeP ne sera pas activé pour toute autre application, y compris *miles.exe*. CFG sera activé pour *miles.exe*.

> [!NOTE]
> Si vous avez trouvé des problèmes dans cet article, vous pouvez le signaler directement à un partenaire client Windows Server/Windows ou utiliser les numéros de support technique Microsoft pour votre pays.

### <a name="configure-system-level-mitigations-with-the-windows-security-app"></a>Configurer des atténuations au niveau du système avec l’application Sécurité Windows système

1. Ouvrez l’Sécurité Windows en sélectionnant l’icône de bouclier dans la barre des tâches ou en recherchant Defender dans le menu **Démarrer.**

2. Sélectionnez **la vignette & contrôle** du navigateur (ou l’icône de l’application dans la barre de menus de gauche), puis sélectionnez Exploit **Protection.**

3. Sous la section **Paramètres système,** recherchez l’atténuation que vous souhaitez configurer et sélectionnez l’une des mesures suivantes. Les applications qui ne sont pas configurées individuellement dans la section **Paramètres** du programme utiliseront les paramètres configurés ici :
   - **Activé par défaut** :  l’atténuation est activée pour les applications qui n’ont pas cette atténuation définie dans la section Paramètres du programme propre **à l’application.**
   - **Désactivée par défaut**  : l’atténuation est désactivée pour les applications qui n’ont pas cette atténuation définie dans la section Paramètres du programme spécifique **à l’application**
   - **Utiliser la valeur** par défaut : l’atténuation est activée ou désactivée, en fonction de la configuration par défaut qui est définie par Windows 10'installation ; la valeur par défaut (**On** or **Off**) est toujours spécifiée en dehors de l’étiquette Utiliser par **défaut** pour chaque atténuation

   > [!NOTE]
   > Vous pouvez voir une fenêtre Contrôle de compte d’utilisateur lors de la modification de certains paramètres. Entrez les informations d’identification de l’administrateur pour appliquer le paramètre.

   La modification de certains paramètres peut nécessiter un redémarrage.

4. Répétez cette configuration pour toutes les atténuations au niveau du système que vous souhaitez configurer.

5. Go to the **Program settings** section and choose the app you want to apply mitigations to:

   1. Si l’application que vous souhaitez configurer est déjà répertoriée, sélectionnez-la, puis sélectionnez **Modifier**
   2. Si l’application n’est pas répertoriée,  en haut de la liste, sélectionnez Ajouter un programme à personnaliser, puis choisissez la façon dont vous souhaitez ajouter l’application :
      - Utilisez **Ajouter par nom de programme pour** que l’atténuation soit appliquée à tout processus en cours d’exécution avec ce nom. Vous devez spécifier un fichier avec une extension. Vous pouvez entrer un chemin d’accès complet pour limiter l’atténuation uniquement à l’application avec ce nom à cet emplacement.
      - Utilisez **choose exact file path** to use a standard Windows Explorer file picker window to find and select the file you want.

6. Après avoir sélectionné l’application, vous verrez une liste de toutes les atténuations qui peuvent être appliquées. Pour activer l’atténuation, activez la case à cocher, puis modifiez le curseur sur **Activé.** Sélectionnez toutes les options supplémentaires. Le choix de **l’audit** appliquera l’atténuation en mode audit uniquement. Vous serez averti si vous devez redémarrer le processus ou l’application, ou si vous devez redémarrer Windows.

7. Répétez ces étapes pour toutes les applications et atténuations que vous souhaitez configurer. Sélectionnez **Appliquer** lorsque vous avez terminé la configuration de votre configuration.

Vous pouvez maintenant [exporter ces paramètres en tant](import-export-exploit-protection-emet-xml.md) que fichier XML ou continuer à configurer des atténuations spécifiques à l’application.

L’exportation de la configuration en tant que fichier XML vous permet de copier la configuration d’un appareil sur d’autres appareils.

## <a name="powershell-reference"></a>Référence PowerShell

Vous pouvez utiliser l’application Sécurité Windows pour configurer Exploit Protection, ou vous pouvez utiliser des cmdlets PowerShell.

Les paramètres de configuration récemment modifiés seront toujours appliqués, que vous utilisez PowerShell ou Sécurité Windows. Cela signifie que si vous utilisez l’application pour configurer une atténuation, puis utilisez PowerShell pour configurer la même atténuation, l’application se met à jour pour afficher les modifications que vous avez apportées avec PowerShell. Si vous utilisez ensuite l’application pour modifier à nouveau l’atténuation, cette modification s’applique.

> [!IMPORTANT]
> Toutes les modifications déployées sur un appareil par le biais de la stratégie de groupe remplaceront la configuration locale. Lors de la configuration d’une configuration initiale, utilisez un appareil sur qui n’aura pas de configuration de stratégie de groupe appliquée pour vous assurer que vos modifications ne sont pas overridées.

Vous pouvez utiliser le verbe PowerShell `Get` ou `Set` avec l’cmdlet `ProcessMitigation` . L’utilisation permet de lister l’état de configuration actuel des atténuations qui ont été activées sur l’appareil : ajoutez la cmdlet et l’exe d’application pour voir les atténuations pour `Get` `-Name` cette application :

```PowerShell
Get-ProcessMitigation -Name processName.exe
```

> [!IMPORTANT]
> Les atténuations au niveau du système qui n’ont pas été configurées afficheront un état de `NOTSET` .
>
> Pour les paramètres au niveau du système, indique que le paramètre par défaut de `NOTSET` cette atténuation a été appliqué.
>
> Pour les paramètres au niveau de l’application, indique que le paramètre au niveau du système pour l’atténuation `NOTSET` sera appliqué.
>
> Le paramètre par défaut pour chaque atténuation au niveau du système est visible dans la Sécurité Windows.

Permet `Set` de configurer chaque atténuation au format suivant :

```PowerShell
Set-ProcessMitigation -<scope> <app executable> -<action> <mitigation or options>,<mitigation or options>,<mitigation or options>
```

Où :

- \<Scope\>:
  - `-Name` pour indiquer que les atténuations doivent être appliquées à une application spécifique. Spécifiez le exécutable de l’application après cet indicateur.
  - `-System` pour indiquer que l’atténuation doit être appliquée au niveau du système
- \<Action\>:
  - `-Enable` pour activer l’atténuation
  - `-Disable` pour désactiver l’atténuation
- \<Mitigation\>:
  - Cmdlet de l’atténuation telle que définie dans le tableau [des cmdlets](#cmdlets-table) d’atténuation ci-dessous, ainsi que toutes les sous-options (entourées d’espaces). Chaque atténuation est séparée par une virgule.

Par exemple, pour activer la prévention de l’exécution des données avec l’émulation thunk ATL et pour un *exécutable* appelétesting.exedans le dossier *C:\Apps\LOB\tests* et pour empêcher cet exécutable de créer des processus enfants, vous devez utiliser la commande suivante :

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable DEP, EmulateAtlThunks, DisallowChildProcessCreation
```

> [!IMPORTANT]
> Séparez chaque option d’atténuation par des virgules.

Si vous souhaitez appliquer la PD DEP au niveau du système, vous devez utiliser la commande suivante :

```PowerShell
Set-Processmitigation -System -Enable DEP
```

Pour désactiver les atténuations, vous pouvez remplacer `-Enable` par `-Disable` . Toutefois, pour les atténuations au niveau de l’application, cela force la désactivation de l’atténuation uniquement pour cette application.

Si vous devez rétablir la valeur par défaut du système pour l’atténuation, vous devez également inclure l’cmdlet, comme `-Remove` dans l’exemple suivant :

```PowerShell
Set-Processmitigation -Name test.exe -Remove -Disable DEP
```

Vous pouvez également définir certaines atténuations en mode audit. Au lieu d’utiliser l’cmdlet PowerShell pour l’atténuation, utilisez la cmdlet **mode Audit** comme indiqué dans le tableau des [cmdlets](#cmdlets-table) d’atténuation ci-dessous.

Par exemple, pour activer arbitrary Code Guard (ACG) en mode audit pour letesting.exeutilisé précédemment, vous devez utiliser la commande suivante : 

```PowerShell
Set-ProcessMitigation -Name c:\apps\lob\tests\testing.exe -Enable AuditDynamicCode
```

Vous pouvez désactiver le mode audit à l’aide de la même commande, mais en le remplaçant `-Enable` par `-Disable` .

### <a name="powershell-reference-table"></a>Table de référence PowerShell

Ce tableau répertorie les cmdlets PowerShell (et l’cmdlet de mode audit associée) qui peuvent être utilisées pour configurer chaque atténuation.

<a id="cmdlets-table"></a>

|Atténuation|S’applique à|Cmdlets PowerShell|Cmdlet du mode audit|
|---|---|---|---|
|Protection du flux de contrôle (CFG)|Niveau système et application|CFG, StrictCFG, SuppressExports|Audit non disponible|
|Prévention de l’exécution des données (PED)|Niveau système et application|DEP, EmulateAtlThunks|Audit non disponible|
|Forcer la randomisation des images (randomisation du format d’espace d’adresse obligatoire)|Niveau système et application|ForceRelocateImages|Audit non disponible|
|Randomiser les allocations de mémoire (randomisation du format d’espace d’adresse de bas en haut)|Niveau système et application|BottomUp, HighEntropy|Audit non disponible|
|Valider les chaînes d’exception (SEHOP)|Niveau système et application|SEHOP, SEHOPTelemetry|Audit non disponible|
|Valider l’intégrité du segment de mémoire|Niveau système et application|TerminateOnError|Audit non disponible|
|Protection du code arbitraire (ACG)|Niveau application uniquement|DynamicCode|AuditDynamicCode|
|Bloquer les images de faible intégrité|Niveau application uniquement|BlockLowLabel|AuditImageLoad|
|Bloquer les images distantes|Niveau application uniquement|BlockRemoteImages|Audit non disponible|
|Bloquer les polices non approuvées|Niveau application uniquement|DisableNonSystemFonts|AuditFont, FontAuditOnly|
|Protection de l’intégrité du code|Niveau application uniquement|BlockNonMicrosoftSigned, AllowStoreSigned|AuditMicrosoftSigned, AuditStoreSigned|
|Désactiver les points d’extension|Niveau application uniquement|ExtensionPoint|Audit non disponible|
|Désactiver les appels système Win32k|Niveau application uniquement|DisableWin32kSystemCalls|AuditSystemCall|
|Ne pas autoriser les processus enfants|Niveau application uniquement|DisallowChildProcessCreation|AuditChildProcess|
|Exporter le filtrage d’adresses (EAF)|Niveau application uniquement|EnableExportAddressFilterPlus, EnableExportAddressFilter <a href="#r1" id="t1"> \[ 1 \] </a>|Audit non disponible<a href="#r2" id="t2"> \[ 2 \] </a>|
|Importer le filtrage d’adresses (IAF)|Niveau application uniquement|EnableImportAddressFilter|Audit non disponible<a href="#r2" id="t2"> \[ 2 \] </a>|
|Simuler l’exécution (SimExec)|Niveau application uniquement|EnableRopSimExec|Audit non disponible<a href="#r2" id="t2"> \[ 2 \] </a>|
|Valider l’invocation de l’API (CallerCheck)|Niveau application uniquement|EnableRopCallerCheck|Audit non disponible<a href="#r2" id="t2"> \[ 2 \] </a>|
|Valider l’utilisation de la poignée|Niveau application uniquement|StrictHandle|Audit non disponible|
|Valider l’intégrité des dépendances d’image|Niveau application uniquement|EnforceModuleDepencySigning|Audit non disponible|
|Valider l’intégrité de la pile (StackPivot)|Niveau application uniquement|EnableRopStackPivot|Audit non disponible<a href="#r2" id="t2"> \[ 2 \] </a>|

<a href="#t1" id="r1"> \[ 1 \] :</a>utilisez le format suivant pour activer les modules EAF pour les DLL d’un processus :

```PowerShell
Set-ProcessMitigation -Name processName.exe -Enable EnableExportAddressFilterPlus -EAFModules dllName1.dll,dllName2.dll
```

<a href="#t2" id="r2"> \[ 2 \] </a>: l’audit de cette atténuation n’est pas disponible via les cmdlets PowerShell.

## <a name="customize-the-notification"></a>Personnaliser la notification

Pour plus d’informations sur la personnalisation de la notification lorsqu’une règle est déclenchée et bloque une application ou un [fichier,](/windows/security/threat-protection/windows-defender-security-center/windows-defender-security-center)voir Sécurité Windows .

## <a name="see-also"></a>Voir aussi

- [Protéger les appareils contre les codes malveillants exploitant une faille de sécurité](exploit-protection.md)
- [Évaluer exploit protection](evaluate-exploit-protection.md)
- [Activer la protection la protection contre les codes malveillants exploitant une faille de sécurité](enable-exploit-protection.md)
- [Importer, exporter et déployer des configurations de protection contre les codes malveillants exploitant une faille de sécurité](import-export-exploit-protection-emet-xml.md)
